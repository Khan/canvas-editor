<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Live Editor Simple Demo</title>
    <link rel="stylesheet" href="../../build/css/live-editor.core_deps.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.audio.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.tooltips.css"/>
    <link rel="stylesheet" href="../../build/css/live-editor.ui.css"/>
    <style>
        body {
            padding: 20px;
        }

        h1 {
            padding: 0;
            margin: 0 0 20px 0;
        }
        #sample-live-editor {
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>Live Editor Example</h1>
    <div id="sample-live-editor"></div>

    <script src="../../build/js/live-editor.core_deps.js"></script>
    <script src="../../build/js/live-editor.editor_ace_deps.js"></script>
    <script src="../../build/js/live-editor.audio.js"></script>
    <script src="../../build/js/live-editor.shared.js"></script>
    <script src="../../build/js/live-editor.tooltips.js"></script>
    <script src="../../build/js/live-editor.ui.js"></script>
    <script src="../../build/js/live-editor.editor_ace.js"></script>

    <script>
    var outputUrl = "output.html";

    var code = window.localStorage["test-code"] || "rect(10, 10, 100, 100);";

    var search = location.search.substring(1);
    var params = {};
    search.split("&").forEach(function(param) {
        var tokens = param.split("=");
        params[tokens[0]] = tokens[1];
    });

    if (params.scratchpad) {
        var xhr = new XMLHttpRequest();
        var baseUrl = "https://www.khanacademy.org/api/internal/scratchpads/";
        xhr.open("GET", baseUrl + params.scratchpad, false);
        xhr.addEventListener("load", function() {
            var scratchpad = JSON.parse(this.responseText);
            code = scratchpad.revision.code;
            var h1 = document.querySelector('h1');
            h1.innerText = scratchpad.title;
        });
        xhr.send();
    }

    window.liveEditor = new LiveEditor({
        el: $("#sample-live-editor"),
        code: code,
        width: 400,
        height: 400,
        editorHeight: "80%",
        autoFocus: true,
        workersDir: "../../build/workers/",
        externalsDir: "../../build/external/",
        imagesDir: "../../build/images/",
        soundsDir: "../../sounds/",
        execFile: outputUrl,
        jshintFile: "../../build/external/jshint/jshint.js",
        newErrorExperience: true,
        validation: "\n\n/**************\n* Syntax Checks\n***************/\nvar syntaxChecks = [\n    /*\n    {\n        //offending syntax error\n        re: /regex goes here/,\n        msg: $._(\"error message goes here\")\n    }\n    */\n];\n\n/************\n* STEP 0\n*************/\nstaticTest($._(\"Color the sky!\"), function() {\n    var result = null;\n    var descrip = $._(\"We've drawn a snowman on a sunny day, and you'll add color to this drawing so that the snowman knows how sunny it really is!\\n\\nStart off by using the `background()` command to change the color of the sky (Blue might be a nice color to use).\");\n    \n    var displayP = function() {\nbackground(_, _, _);\n    };\n    \n    /*****************\n    *Passing code \n    *****************/\n    \n    /** background above ground **/\n    \n    //check background above ground\n    var matchGoodOrderlP = function() {\n        background($r1, $g1, $b1);\n        \n        // The ground\n        rect();  \n\n        // The sun\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    var goodOrderMatch = anyPass(match(matchGoodOrderlP));\n    \n    /** background not red **/\n    \n    //check r,g,b values are not red\n    var isNotRedC = constraint([\"$r1\",\"$g1\",\"$b1\"], function(r1,g1,b1) {\n        return  r1.type === \"Literal\" && g1.type === \"Literal\" && b1.type === \"Literal\" &&\n                !(r1.value === 255 && g1.value === 0 && b1.value === 0);\n    });\n    \n    var matchGoodColor1S = structure(matchGoodOrderlP,isNotRedC);\n    \n    var goodColorMatch = anyPass(match(matchGoodColor1S));\n    \n    \n    result = allPass( goodOrderMatch, goodColorMatch );\n    \n        \n    /**************\n    *Failing Code\n    ***************/\n    \n    /** has red background **/\n    \n    var redFillP = function() {\n        background(255, 0, 0);\n    };\n    \n    if (!passes(result) && !passes(goodColorMatch) && matches(redFillP) ) {\n        result = fail($._(\"Try using a color, other than red, for your `background()` command for the sky. Maybe blue would be a nice color for the sky ?\"));\n    }\n    \n    /** background statement not before ground **/\n    \n    //check background before ground\n    var matchBadorder1P = function() {\n        rect();\n        background();\n    };    \n        \n    if (!passes(result) && !passes(goodOrderMatch) && matches(matchBadorder1P)) {\n        result = fail($._(\"Uh oh, the background now hides the ground! Move the `background()` command to the top of the program so that the (white) ground is still visible.\"));\n    }\n    \n    /** has fill statement but not background statement **/\n    \n    //check has background statement\n    var matchHasBackground1P = function() {\n        background();\n    };\n    \n    var matchHAsFill1P = function() {\n        fill();  \n    };\n        \n    if (!passes(result) && !passes(goodOrderMatch) && matches(matchHAsFill1P) && !matches(matchHasBackground1P)) {\n        result = fail($._(\"The `fill()` command only changes the color of shapes after it, but the `background()` command changes the color of the entire canvas. So, to change the color of the sky, you will want to use a `background()` command instead of a `fill()` command.\"));\n    }\n    \n    /****************************\n    *Passing Code with Exceptions \n    *****************************/\n    //none yet\n    \n    /**************\n     * Always Check\n     *************/\n     \n    /** more than one background statement **/\n    \n    //check for more than one background statement\n    var backgroundTwiceP = function() {\n        background();\n        background();\n    };\n    \n    if ( matches(backgroundTwiceP)) {\n        result = fail($._(\"Hm, you shouldn't need more than one `background()` command in your program. You should only need one `background()` command at the beginning of your program, to paint the sky. Remove any extra `background()` commands.\"));\n    }\n    \n    /** ground, sun, or snowman deleted **/\n    \n    //check 1 rect for ground followed by 1 ellipse for sun and 3 ellipse for snowman\n    //note: this won't detect modifications to the values\n    var allPartsP = function() {\n        rect();\n        ellipse();\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    if ( !matches(allPartsP) ) {\n        result = fail($._(\"It looks like you deleted or moved some of the shapes (there should be a `rect()` for the ground, an `ellipse()` for the sun, and 3 `ellipse()`s for the snowman). To get all the shapes back in order, click the 'Start Over' button.\"));\n    }\n    \n    /** ellipse for sun moved before ground **/\n    \n    //check if sun moved before ground\n    var matchSunAboveGround1P = function() {\n        ellipse();\n        rect();\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    if ( matches(matchSunAboveGround1P)) {\n        result = fail($._(\"It looks like you moved the `rect()` command for the ground, below the `ellipse()` command for the sun. Can you change it back ? The ground should be the first shape drawn.\"));\n    }\n    \n    /** ellipses for snowman moved before ground **/\n    \n    // check if snowman moved before ground\n    var matchSnowmanAboveGround1P = function() {\n        ellipse();\n        ellipse();\n        ellipse();\n        rect();\n        ellipse();\n    };\n            \n    if (matches(matchSnowmanAboveGround1P)) {\n        result = fail($._(\"It looks like you moved the `ellipse()` commands for the snowman, above the `rect()` command for the ground. Can you move the `ellipse()` commands, for the snowman, back down to the end of your program ?\"));\n    }\n    \n    /** ellipses for sun and snowman moved before ground **/\n    \n    // check if sun and snowman moved before ground\n    var matchSunAndSnowmanAboveGround1P = function() {\n        ellipse();\n        ellipse();\n        ellipse();\n        ellipse();\n        rect();\n    };\n            \n    if (matches(matchSunAndSnowmanAboveGround1P)) {\n        result = fail($._(\"It looks like you moved the `rect()` command for the ground, below the `ellipse()` commands for the sun and snowman. Can you move it back up to the beginning of your program ? The ground should be the first shape drawn.\"));\n    }\n    \n    \n    \n    /*** extra rects or ellipses added **/\n    \n    //more than 4 ellipses\n    var extras1P = function() {\n        ellipse();\n        ellipse();\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //more than one rect\n    var extras2P = function() {\n        rect();\n        rect();\n    };\n    \n    if ( matches(extras1P) || matches(extras2P) ) {\n        result = fail($._(\"It looks like you're adding some extra shapes to your program, which is making it difficult for us to check your work. Could you remove those extra shapes or click 'Start Over' to return to the beginning of the challenge ?\"));\n    }\n    \n    /** using noFill() **/\n    \n    var matchNoFill1P = function() {\n        noFill();  \n    };\n    \n    if ( matches(matchNoFill1P) ) {\n        result = fail($._(\"You shouldn't need to use the `noFill()` command for this challenge. Please remove it.\"));\n    }\n    \n    assertMatch(result, descrip, displayP,\"https://cdn.kastatic.org/ka-perseus-images/d7ff1347acdd6e48939d4b666afed2ff3947c613.png\", syntaxChecks);\n});\n\n/************\n* STEP 1\n*************/\nstaticTest($._(\"Color the ground!\"), function() {\n    var result = null;\n    var descrip = $._(\"Use the `fill()` command to change the color of the ground (Green might be a nice color to use).\\n\\nRemember that, you'll need the `fill()` command to come *before* the `rect()` command that draws the ground. Don't worry if the color of the other shapes changes too, you'll fix them later!\");\n    \n    var displayP = function() {\nfill(_, _, _);\n    };\n    \n    /*****************\n    *Passing code \n    *****************/\n    \n    /** fill above ground **/\n    \n    //check fill above ground\n    //after background\n    var matchGoodOrderlP = function() {\n        background($r1, $g1, $b1);\n        \n        // The ground\n        fill($r2,$g2,$b2);\n        rect();  \n\n        // The sun\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check fill above ground\n    //before background\n    var matchGoodOrder2P = function() {\n        fill($r2,$g2,$b2);\n        background($r1, $g1, $b1);\n        \n        // The ground\n        \n        rect();  \n\n        // The sun\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    var goodOrderMatch = anyPass(match(matchGoodOrderlP),match(matchGoodOrder2P));\n    \n    /** fill not red **/\n    \n    //check r,g,b values are not red\n    var isNotRedC = constraint([\"$r2\",\"$g2\",\"$b2\"], function(r2,g2,b2) {\n        return  r2.type === \"Literal\" && g2.type === \"Literal\" && b2.type === \"Literal\" &&\n                !(r2.value === 255 && g2.value === 0 && b2.value === 0);\n    });\n    \n    var matchGoodColor1S = structure(matchGoodOrderlP,isNotRedC);\n    var matchGoodColor2S = structure(matchGoodOrder2P,isNotRedC);\n    \n    var goodColorMatch = anyPass(match(matchGoodColor1S),match(matchGoodColor2S) );\n    \n\n    var result = allPass(goodOrderMatch,goodColorMatch );\n    \n    /**************\n    *Failing Code\n    ***************/\n    \n    /** using red fill for ground **/\n    \n    var matchRedFillBeforeGround1P = function() {\n        fill(255,0,0);\n        rect();\n    };\n    \n    if (!passes(result) && !passes(goodColorMatch) && matches(matchRedFillBeforeGround1P) ) {\n        result = fail($._(\"Try using a color, other than red, for your `fill()` command for the ground. Maybe green would be a nice color for the ground ?\"));\n    }\n    \n    /** fill statement not before ground **/\n    \n    //check for fill statement below ground\n    var matchBadOrderlP = function() {\n        rect();\n        fill();\n    };\n    \n    if (!passes(result) && !passes(goodOrderMatch) && matches(matchBadOrderlP) ) {\n        result = fail($._(\"Remember that the `fill()` command only affects shapes drawn after it. Try moving your `fill()` command before the `rect()` command, so that it changes the color of the ground (the shapes after it will change their colors too).\"));\n    }\n    \n    /****************************\n    *Passing Code with Exceptions \n    *****************************/\n    \n    /** same color as background **/\n    \n    //check ground and background have same color\n    //fill after background\n    var matchGroundSkySameColor1P = function() {\n        background($r1, $g1, $b1);\n        \n        // The ground\n        fill($r2,$g2,$b2);\n        rect();  \n\n        // The sun\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check ground and background have same color\n    //fill before background\n    var matchGroundSkySameColor2P = function() {\n        fill($r2,$g2,$b2);\n        background($r1, $g1, $b1);\n        \n        // The ground\n        \n        rect();  \n\n        // The sun\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check r,g,b values for background and ground are the same\n    var sameColorC = constraint([\"$r1\",\"$g1\",\"$b1\",\"$r2\",\"$g2\",\"$b2\"], function(r1,g1,b1,r2,g2,b2) {\n        return  r1.type === \"Literal\" && g1.type === \"Literal\" && b1.type === \"Literal\" &&\n                r2.type === \"Literal\" && g2.type === \"Literal\" && b2.type === \"Literal\" &&\n                r1.value === r2.value && g1.value === g2.value && b1.value === b2.value;\n    });\n    \n    var matchGroundSkySameColor1S = structure(matchGroundSkySameColor1P,sameColorC);\n    var matchGroundSkySameColor2S = structure(matchGroundSkySameColor2P,sameColorC);\n    \n    var groundSkySameColorMatch = anyPass(match(matchGroundSkySameColor1S),match(matchGroundSkySameColor2S) );\n    \n    \n    if(passes(result) && passes(groundSkySameColorMatch)){\n        result = fail($._(\"It looks like you're using the same color for the sky and the ground. Try using a different color for the ground.\"));\n    }\n    \n    \n    /**************\n     * Always Check\n     *************/\n     \n    /** two fill statements above ground **/\n    \n    var matchTwoFillsAboveGround1P = function() {\n        fill();\n        fill();\n        rect();\n    };\n    \n    if( matches(matchTwoFillsAboveGround1P) ) {\n        result = fail($._(\"You should only have one `fill()` command before the `rect()` command. Remove any extra `fill()` commands before the `rect()` command.\"));\n    }\n    \n    /** too many fill statements **/\n    //this message is duplicated in STEP 1,2,3 so same message shows up on all steps\n    \n    //should only need 3 fill statements, but we allow for 2 extra fills if they\n    //are used to color the individual parts of the snowman\n    \n    //check for more than 3 fill statements\n    var matchMoreThanThreeFills1P = function() {\n        fill();\n        fill();\n        fill();\n        fill();\n    };\n    \n    //check for more than 5 fill statements\n    var matchMoreThanFiveFills1P = function() {\n        fill();\n        fill();\n        fill();\n        fill();\n        fill();\n        fill();\n    }; \n    \n    //head middle and body of snowman have individual fill statements\n    var matchFillForBottomMiddleHead1P = function() {\n        rect();\n        ellipse();\n        \n        fill();\n        ellipse();\n        fill();\n        ellipse();\n        fill();\n        ellipse();\n      \n    };\n    \n    if( (!matches(matchFillForBottomMiddleHead1P) && matches(matchMoreThanThreeFills1P) )||\n        ( matches(matchFillForBottomMiddleHead1P) && matches(matchMoreThanFiveFills1P)  )\n    ){\n        result = fail($._(\"You shouldn't need to have more than three `fill()` commands for this challenge (one for the ground, one for the sun, and one for the snowman). Remove any extra `fill()` commands.\"));\n    }\n    \n    assertMatch(result, descrip, displayP,\"https://cdn.kastatic.org/ka-perseus-images/cf9f97392734d84c04258910103a28cf29e1818e.png\", syntaxChecks);\n    \n});\n\n/************\n* STEP 2\n*************/\nstaticTest($._(\"Color the sun!\"), function() {\n    var result = null;\n    var descrip = $._(\"Now, add another `fill()` command to change the color of the sun (Orange or yellow might be nice colors to use). Don't worry if the color of the snowman changes too, you'll fix him next!\");\n    \n    var displayP = function() {\nfill(_, _, _);\n    };\n    \n    /*****************\n    *Passing code \n    *****************/\n    \n    /** fill above sun **/\n    \n    //check fill above sun\n    //(fill for ground below background)\n    var matchGoodOrderlP = function() {\n        background($r1, $g1, $b1);\n        \n        // The ground\n        fill($r2,$g2,$b2);\n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check fill above sun\n    //(fill for ground above background)\n    var matchGoodOrder2P = function() {\n        fill($r2,$g2,$b2);      \n        background($r1, $g1, $b1);\n        // The ground\n\n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    var goodOrderMatch = anyPass(match(matchGoodOrderlP),match(matchGoodOrder2P));\n    \n    /** fill not red **/\n    \n    //check r,g,b values are not red\n    var isNotRedC = constraint([\"$r3\",\"$g3\",\"$b3\"], function(r3,g3,b3) {\n        return  r3.type === \"Literal\" && g3.type === \"Literal\" && b3.type === \"Literal\" &&\n                !(r3.value === 255 && g3.value === 0 && b3.value === 0);\n    });\n    \n    var matchGoodColor1S = structure(matchGoodOrderlP,isNotRedC);\n    var matchGoodColor2S = structure(matchGoodOrder2P,isNotRedC);\n    \n    var goodColorMatch = anyPass(match(matchGoodColor1S),match(matchGoodColor2S) );\n    \n\n    var result = allPass(goodOrderMatch,goodColorMatch );\n    \n    /**************\n    *Failing Code\n    ***************/\n    \n    /** using red fill for sun **/\n    \n    //check for red fill before sun and after ground\n    var matchRedFillBeforeSun1P = function() {\n        rect();  \n\n        fill(255,0,0);\n        ellipse();  \n\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    if (!passes(result) && !passes(goodColorMatch) && matches(matchRedFillBeforeSun1P) ) {\n        result = fail($._(\"Try using a color, other than red, for your `fill()` command for the sun. Maybe yellow or orange would be nice colors for the sun ?\"));\n    }\n    \n    /** second fill statement not before sun **/\n    \n    //check for fill statement below sun and above snowman\n    var matchBadOrderlP = function() {\n        rect();  \n        ellipse();  \n        fill();\n\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check for fill statement below 1st ellipse of snowman\n    var matchBadOrder2P = function() {\n        rect();  \n        ellipse();  \n\n        ellipse();\n        fill();\n    };\n    \n    var badOrderMatch = anyPass(match(matchBadOrderlP),match(matchBadOrder2P));\n    \n    if (!passes(result) && !passes(goodOrderMatch) && passes(badOrderMatch) ) {\n        result = fail($._(\"Remember that the `fill()` command only affects shapes drawn after it (it doesn't affect shapes drawn before it). Try moving your `fill()` command before the first `ellipse()` command, so that it changes the color of the sun (the shapes after it will change their colors too).\"));\n    }\n    \n    /** only one fill statement **/\n    \n    //check has two fill statements\n    var matchTwoFills1P = function() {\n        fill();\n        fill();\n    };\n    \n    if (!passes(result) && !matches(matchTwoFills1P) ) {\n        result = fail($._(\"You'll need to add another `fill()` command to make the sun its own color.\"));\n    }\n    \n    /****************************\n    *Passing Code with Exceptions \n    *****************************/\n    \n    /** sun same color as background or ground **/\n    \n    //check sun same color as background or ground\n    //fill after background\n    var matchSunSameColor1P = function() {\n        background($r1, $g1, $b1);\n        \n        // The ground\n        fill($r2,$g2,$b2);\n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check ground and background have same color\n    //fill before background\n    var matchSunSameColor2P = function() {\n        fill($r2,$g2,$b2);\n        background($r1, $g1, $b1);\n        \n        // The ground\n        \n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    /** sun same color as background **/\n    \n    //check r,g,b values for sun and background are the same\n    var sameColorSkyC = constraint([\"$r1\",\"$g1\",\"$b1\",\"$r3\",\"$g3\",\"$b3\"], function(r1,g1,b1,r3,g3,b3) {\n        return  r1.type === \"Literal\" && g1.type === \"Literal\" && b1.type === \"Literal\" &&\n                r3.type === \"Literal\" && g3.type === \"Literal\" && b3.type === \"Literal\" &&\n                r1.value === r3.value && g1.value === g3.value && b1.value === b3.value;\n    });\n    \n    var matchSunSkySameColor1S = structure(matchSunSameColor1P,sameColorSkyC);\n    var matchSunSkySameColor2S = structure(matchSunSameColor2P,sameColorSkyC);\n    \n    var sunSkySameColorMatch = anyPass(match(matchSunSkySameColor1S),match(matchSunSkySameColor2S) );\n    \n    if(passes(result) && passes(sunSkySameColorMatch) ) {\n        result = fail($._(\"It looks like you're using the same color for the sky and the sun. Try using a different color for the sun.\"));\n    }\n    \n    /** sun same color as ground **/\n    \n    //check r,g,b values for sun and ground are the same\n    var sameColorGroundC = constraint([\"$r2\",\"$g2\",\"$b2\",\"$r3\",\"$g3\",\"$b3\"], function(r2,g2,b2,r3,g3,b3) {\n        return  r2.type === \"Literal\" && g2.type === \"Literal\" && b2.type === \"Literal\" &&\n                r3.type === \"Literal\" && g3.type === \"Literal\" && b3.type === \"Literal\" &&\n                r2.value === r3.value && g2.value === g3.value && b2.value === b3.value;\n    });\n    \n    var matchSunGroundSameColor1S = structure(matchSunSameColor1P,sameColorGroundC);\n    var matchSunGroundSameColor2S = structure(matchSunSameColor2P,sameColorGroundC);\n    \n    var sunGroundSameColorMatch = anyPass(match(matchSunGroundSameColor1S),match(matchSunGroundSameColor2S) );\n    \n    if(passes(result) && passes(sunGroundSameColorMatch) ) {\n        result = fail($._(\"It looks like you're using the same color for the ground and the sun. Try using a different color for the sun.\"));\n    }\n    \n\n    /**************\n     * Always Check\n     *************/\n\n    /** two fill statements between ground and sun **/\n    \n    var matchTwoFillsBetweenGroundAndSun1P = function() {\n        rect();\n        fill();\n        fill();\n        ellipse();\n        \n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    if( matches(matchTwoFillsBetweenGroundAndSun1P) ) {\n        result = fail($._(\"You should only have one `fill()` command between the `rect()` command and the first `ellipse()` command. Remove any extra `fill()` commands between the `rect()` command and the first `ellipse()` command.\"));\n    }\n    \n    /** too many fill statements **/\n    //this message is duplicated in STEP 1,2,3 so same message shows up on all steps\n    \n    //should only need 3 fill statements, but we allow for 2 extra fills if they\n    //are used to color the individual parts of the snowman\n    \n    //check for more than 3 fill statements\n    var matchMoreThanThreeFills1P = function() {\n        fill();\n        fill();\n        fill();\n        fill();\n    };\n    \n    //check for more than 5 fill statements\n    var matchMoreThanFiveFills1P = function() {\n        fill();\n        fill();\n        fill();\n        fill();\n        fill();\n        fill();\n    }; \n    \n    //head middle and body of snowman have individual fill statements\n    var matchFillForBottomMiddleHead1P = function() {\n        rect();\n        ellipse();\n        \n        fill();\n        ellipse();\n        fill();\n        ellipse();\n        fill();\n        ellipse();\n      \n    };\n    \n    if( (!matches(matchFillForBottomMiddleHead1P) && matches(matchMoreThanThreeFills1P) )||\n        ( matches(matchFillForBottomMiddleHead1P) && matches(matchMoreThanFiveFills1P)  )\n    ){\n        result = fail($._(\"You shouldn't need to have more than three `fill()` commands for this challenge (one for the ground, one for the sun, and one for the snowman). Remove any extra `fill()` commands.\"));\n    }\n    \n    assertMatch(result, descrip, displayP,\"https://cdn.kastatic.org/ka-perseus-images/54ab30af919f849ffe7f97bcbd711c555c60bbfc.png\", syntaxChecks);\n});\n\n/************\n* STEP 3\n*************/\nstaticTest($._(\"What about the snowman!?\"), function() {\n    var result = null;\n    var descrip = $._(\"Now, add another `fill()` command to change the color of the snowman (White might be a nice color to use). All three parts of the snowman's body should be *one color*, not three different colors, so you only need to add one `fill()` command for this step.\");\n    \n    var displayP = function() {\nfill(_,_,_);\n    };\n    \n    /*****************\n    *Passing code \n    *****************/\n    \n    /** fill above snowman **/\n    \n    //check fill above snowman\n    //(fill for ground below background)\n    var matchGoodOrderlP = function() {\n        background($r1,$g1,$b1);\n        \n        // The ground\n        fill($r2,$g2,$b2);\n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        fill($r4,$g4,$b4);\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check fill above snowman\n    //(fill for ground above background)\n    var matchGoodOrder2P = function() {\n        fill($r2,$g2,$b2);\n        background($r1,$g1,$b1);\n        \n        // The ground\n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        fill($r4,$g4,$b4);\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    var goodOrderMatch = anyPass(match(matchGoodOrderlP),match(matchGoodOrder2P));\n    \n    /** fill not red **/\n    \n    //check r,g,b values are not red\n    var isNotRedC = constraint([\"$r4\",\"$g4\",\"$b4\"], function(r4,g4,b4) {\n        return  r4.type === \"Literal\" && g4.type === \"Literal\" && b4.type === \"Literal\" &&\n                !(r4.value === 255 && g4.value === 0 && b4.value === 0);\n    });\n    \n    var matchGoodColor1S = structure(matchGoodOrderlP,isNotRedC);\n    var matchGoodColor2S = structure(matchGoodOrder2P,isNotRedC);\n    \n    var goodColorMatch = anyPass(match(matchGoodColor1S),match(matchGoodColor2S) );\n    \n\n    var result = allPass(goodOrderMatch,goodColorMatch );\n    \n    /**************\n    *Failing Code\n    ***************/\n    \n    /** using red fill for snowman **/\n    \n    //check for red fill before snowman and after sun\n    var matchRedFillBeforeSnowman1P = function() {\n        rect();  \n\n        ellipse();  \n        \n        fill(255,0,0);\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    if (!passes(result) && !passes(goodColorMatch) && matches(matchRedFillBeforeSnowman1P) ) {\n        result = fail($._(\"Try using a color, other than red, for your `fill()` command for the snowman. Maybe white would be a nice color for a snowman ?\"));\n    }\n    \n    /** third fill statement below first ellipse of snowman **/\n        \n    //check for fill statement below 1st ellipse of snowman\n    var matchBadOrder1P = function() {\n        rect();  \n        ellipse();  \n\n        ellipse();\n        fill();\n    };\n    \n    if(!passes(result) && !passes(goodOrderMatch) && matches(matchBadOrder1P) ){\n        result = fail($._(\"Remember that the `fill()` command only affects shapes drawn after it. Try moving your `fill()` command before the `ellipse()` commands for the snowman, so that it changes the color of the snowman.\"));\n    }\n    \n    /** snowman moved before sun **/\n    \n    //check snowman moved before sun\n    //note: this doesn't really work since it is not checking the values in the ellipse\n    var reversedCloudsSunP = function() {\n        fill();\n        rect();\n        fill();\n        ellipse();\n        ellipse();\n        ellipse();\n        \n        fill();\n        ellipse();\n    };\n    \n    if (!passes(result) && !passes(goodOrderMatch) && matches(reversedCloudsSunP) ) {\n        result = fail($._(\"The sun should be drawn before the snowman, but it looks like you moved the `ellipse()` command for the sun, after the `ellipse()` commands for the snowman. Can you move the `ellipse()` command for the sun, to before the three `ellipse()` commands for the snowman ?\"));\n    }\n    \n    /****************************\n    *Passing Code with Exceptions \n    *****************************/\n    \n    /** snowman same color as background, ground, or sun **/\n    \n    //check snowman same color as background, ground or sun\n    //fill for ground after background\n    var matchSnowmanSameColor1P = function() {\n        background($r1, $g1, $b1);\n        \n        // The ground\n        fill($r2,$g2,$b2);\n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        fill($r4,$g4,$b4);\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    //check snowman same color as background, ground or sun\n    //fill for ground before background\n    var matchSnowmanSameColor2P = function() {\n        fill($r2,$g2,$b2);\n        background($r1, $g1, $b1);\n        \n        // The ground\n        \n        rect();  \n\n        // The sun\n        fill($r3,$g3,$b3);\n        ellipse();  \n\n        // The snowman\n        fill($r4,$g4,$b4);\n        ellipse();\n        ellipse();\n        ellipse();\n    };\n    \n    /** snowman same color as sky **/\n    \n    //check r,g,b values for sun and background are the same\n    var sameColorSkyC = constraint([\"$r1\",\"$g1\",\"$b1\",\"$r4\",\"$g4\",\"$b4\"], function(r1,g1,b1,r4,g4,b4) {\n        return  r1.type === \"Literal\" && g1.type === \"Literal\" && b1.type === \"Literal\" &&\n                r4.type === \"Literal\" && g4.type === \"Literal\" && b4.type === \"Literal\" &&\n                r1.value === r4.value && g1.value === g4.value && b1.value === b4.value;\n    });\n    \n    var matchSnowmanSkySameColor1S = structure(matchSnowmanSameColor1P,sameColorSkyC);\n    var matchSnowmanSkySameColor2S = structure(matchSnowmanSameColor2P,sameColorSkyC);\n    \n    var snowmanSkySameColorMatch = anyPass(match(matchSnowmanSkySameColor1S),match(matchSnowmanSkySameColor2S) );\n    \n    if(passes(result) && passes(snowmanSkySameColorMatch) ) {\n        result = fail($._(\"It looks like you're using the same color for the sky and the snowman. Try using a different color for the snowman.\"));\n    }\n    \n    /** snowman same color as ground **/\n    \n    //check r,g,b values for snowman and ground are the same\n    var sameColorGroundC = constraint([\"$r2\",\"$g2\",\"$b2\",\"$r4\",\"$g4\",\"$b4\"], function(r2,g2,b2,r4,g4,b4) {\n        return  r2.type === \"Literal\" && g2.type === \"Literal\" && b2.type === \"Literal\" &&\n                r4.type === \"Literal\" && g4.type === \"Literal\" && b4.type === \"Literal\" &&\n                r2.value === r4.value && g2.value === g4.value && b2.value === b4.value;\n    });\n    \n    var matchSnowmanGroundSameColor1S = structure(matchSnowmanSameColor1P,sameColorGroundC);\n    var matchSnowmanGroundSameColor2S = structure(matchSnowmanSameColor2P,sameColorGroundC);\n    \n    var snowmanGroundSameColorMatch = anyPass(match(matchSnowmanGroundSameColor1S),match(matchSnowmanGroundSameColor2S) );\n    \n    if(passes(result) && passes(snowmanGroundSameColorMatch) ) {\n        result = fail($._(\"It looks like you're using the same color for the ground and the snowman. Try using a different color for the snowman.\"));\n    }\n    \n    /** snowman same color as sun **/\n    \n    //check r,g,b values for snowman and sun are the same\n    var sameColorSunC = constraint([\"$r3\",\"$g3\",\"$b3\",\"$r4\",\"$g4\",\"$b4\"], function(r3,g3,b3,r4,g4,b4) {\n        return  r3.type === \"Literal\" && g3.type === \"Literal\" && b3.type === \"Literal\" &&\n                r4.type === \"Literal\" && g4.type === \"Literal\" && b4.type === \"Literal\" &&\n                r3.value === r4.value && g3.value === g4.value && b3.value === b4.value;\n    });\n    \n    var matchSnowmanSunSameColor1S = structure(matchSnowmanSameColor1P,sameColorSunC);\n    var matchSnowmanSunSameColor2S = structure(matchSnowmanSameColor2P,sameColorSunC);\n    \n    var snowmanSunSameColorMatch = anyPass(match(matchSnowmanSunSameColor1S),match(matchSnowmanSunSameColor2S) );\n    \n    if(passes(result) && passes(snowmanSunSameColorMatch) ) {\n        result = fail($._(\"It looks like you're using the same color for the sun and the snowman. Try using a different color for the snowman.\"));\n    }\n    \n    /**************\n     * Always Check\n     *************/\n   \n    //head middle and body of snowman have individual fill statements\n    var matchFillForBottomMiddleHead1P = function() {\n        rect();\n        ellipse();\n        \n        fill();\n        ellipse();\n        fill();\n        ellipse();\n        fill();\n        ellipse();\n      \n    };\n    \n    if (matches(matchFillForBottomMiddleHead1P)) {\n        result = fail($._(\"It looks like you're using a different `fill()` command for each `ellipse()` of the snowman. Instead, try using just ONE `fill()` command above ALL the `ellipse()` commands for the snowman, so that the entire snowman will be a single color.\"));\n    }\n    \n    /** too many fill statements **/\n    //this message is duplicated in STEP 1,2,3 so same message shows up on all steps\n    \n    //should only need 3 fill statements, but we allow for 2 extra fills if they\n    //are used to color the individual parts of the snowman\n    \n    //check for more than 3 fill statements\n    var matchMoreThanThreeFills1P = function() {\n        fill();\n        fill();\n        fill();\n        fill();\n    };\n    \n    //check for more than 5 fill statements\n    var matchMoreThanFiveFills1P = function() {\n        fill();\n        fill();\n        fill();\n        fill();\n        fill();\n        fill();\n    }; \n    \n    //head middle and body of snowman have individual fill statements\n    var matchFillForBottomMiddleHead1P = function() {\n        rect();\n        ellipse();\n        \n        fill();\n        ellipse();\n        fill();\n        ellipse();\n        fill();\n        ellipse();\n      \n    };\n    \n    if( (!matches(matchFillForBottomMiddleHead1P) && matches(matchMoreThanThreeFills1P) )||\n        ( matches(matchFillForBottomMiddleHead1P) && matches(matchMoreThanFiveFills1P)  )\n    ){\n        result = fail($._(\"You shouldn't need to have more than three `fill()` commands for this challenge (one for the ground, one for the sun, and one for the snowman). Remove any extra `fill()` commands.\"));\n    }\n    \n    assertMatch(result, descrip, displayP,\"https://cdn.kastatic.org/ka-perseus-images/2ed2ebe098071977ecb12f72175797b5eb0aca09.png\", syntaxChecks);\n});\n\n"

    });
    liveEditor.editor.on("change", function() {
        window.localStorage["test-code"] = liveEditor.editor.text();
    });
    ScratchpadAutosuggest.init(liveEditor.editor.editor);
    </script>
</body>
</html>
